<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dual Camera Absensi</title>
<style>
  video {
    width: 45%;
    border: 2px solid #333;
    border-radius: 8px;
    margin: 5px;
  }
  .container {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
  }
</style>
</head>

<body>
<h2>Absensi Dual Kamera (Depan + Belakang)</h2>

<div class="container">
  <div>
    <p>Kamera Belakang</p>
    <video id="camBack" autoplay playsinline></video>
  </div>

  <div>
    <p>Kamera Depan</p>
    <video id="camFront" autoplay playsinline></video>
  </div>
</div>

<script>
async function startDualCamera() {
  // Enumerate semua device kamera
  const devices = await navigator.mediaDevices.enumerateDevices();
  
  let frontCamId = null;
  let backCamId = null;

  // Temukan ID kamera depan & belakang
  devices.forEach(device => {
    if (device.kind === "videoinput") {
      if (device.label.toLowerCase().includes("front")) {
        frontCamId = device.deviceId;
      }
      if (device.label.toLowerCase().includes("back") || device.label.toLowerCase().includes("rear")) {
        backCamId = device.deviceId;
      }
    }
  });

  // Jika tidak terdeteksi, fallback ke facingMode
  const frontStream = await navigator.mediaDevices.getUserMedia({
    video: frontCamId ? {deviceId: {exact: frontCamId}} : {facingMode: "user"},
    audio: false
  });

  const backStream = await navigator.mediaDevices.getUserMedia({
    video: backCamId ? {deviceId: {exact: backCamId}} : {facingMode: {exact: "environment"}},
    audio: false
  });

  document.getElementById("camFront").srcObject = frontStream;
  document.getElementById("camBack").srcObject = backStream;
}

startDualCamera().catch(err => {
  console.error("Gagal mengakses kamera:", err);
  alert("Browser/HP belum mendukung dual kamera.");
});
</script>
</body>
</html>
